-- Generated by Oracle SQL Developer Data Modeler 18.3.0.268.1156
--   at:        2019-04-27 20:36:24 EET
--   site:      DB2/UDB 9
--   type:      DB2/UDB 9



CREATE TABLE manager (
    id       INTEGER NOT NULL  PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
                (START WITH 1, INCREMENT BY 1),
    username   VARCHAR(50),
    pass    VARCHAR(50)
);

CREATE TABLE company (
    id       INTEGER NOT NULL  PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
                (START WITH 1, INCREMENT BY 1),
    "NAME"   VARCHAR(50),
    point    double
);


CREATE TABLE customer (
    id            INTEGER NOT NULL  PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
                (START WITH 1, INCREMENT BY 1),
    "NAME"        VARCHAR(50),
    bonus_point   double
);


CREATE TABLE hotel (
    id         INTEGER NOT NULL  PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
                (START WITH 1, INCREMENT BY 1),
    location   VARCHAR(50),
    "NAME"     VARCHAR(50),
    point      INTEGER
);


CREATE TABLE hotel_capacity (
    id               INTEGER NOT NULL  PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
                (START WITH 1, INCREMENT BY 1),
    daily_capacity   INTEGER,
    price            INTEGER,
    hotel_id         INTEGER NOT NULL
);


CREATE TABLE hotel_ticket (
    id          INTEGER NOT NULL  PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
                (START WITH 1, INCREMENT BY 1),
    hotel_id    INTEGER NOT NULL,
    ticket_id   INTEGER NOT NULL,
    check_in    DATE,
    check_out   DATE
);


CREATE TABLE route_ticket (
    id INTEGER NOT NULL  PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
                (START WITH 1, INCREMENT BY 1),
    route_id      INTEGER NOT NULL,
    ticket_id     INTEGER NOT NULL,
    price         double,
    "FROM"        VARCHAR(50),
    "TO"          VARCHAR(50),
    travel_date   DATE,
    company_id    INTEGER NOT NULL
);


CREATE TABLE ticket (
    id                      INTEGER NOT NULL  PRIMARY KEY GENERATED ALWAYS AS IDENTITY 
                (START WITH 1, INCREMENT BY 1),
    payment_type            VARCHAR(50),
    "DATE"                  DATE,
    payment_amount          double,
    bonus_point_earned      double,
    used_points             double,
    customer_id             INTEGER NOT NULL
);



ALTER TABLE HOTEL_CAPACITY
    ADD CONSTRAINT hotel_capacity_hotel_fk FOREIGN KEY ( hotel_id )
        REFERENCES hotel ( id );

ALTER TABLE HOTEL_TICKET
    ADD CONSTRAINT hotel_ticket_hotel_fk FOREIGN KEY ( hotel_id )
        REFERENCES hotel ( id );

ALTER TABLE HOTEL_TICKET
    ADD CONSTRAINT hotel_ticket_ticket_fk FOREIGN KEY ( ticket_id )
        REFERENCES ticket ( id );

ALTER TABLE ROUTE_TICKET
    ADD CONSTRAINT route_ticket_company_fk FOREIGN KEY ( company_id )
        REFERENCES company ( id );

ALTER TABLE ROUTE_TICKET
    ADD CONSTRAINT route_ticket_ticket_fk FOREIGN KEY ( ticket_id )
        REFERENCES ticket ( id );

ALTER TABLE TICKET
    ADD CONSTRAINT ticket_customer_fk FOREIGN KEY ( customer_id )
        REFERENCES customer ( id );
