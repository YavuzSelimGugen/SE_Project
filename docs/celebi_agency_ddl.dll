-- Generated by Oracle SQL Developer Data Modeler 18.3.0.268.1156
--   at:        2019-04-27 20:36:24 EET
--   site:      DB2/UDB 9
--   type:      DB2/UDB 9



CREATE TABLE company (
    id       INTEGER NOT NULL,
    "NAME"   VARCHAR(50),
    point    double
);

ALTER TABLE company ADD CONSTRAINT company_pk PRIMARY KEY ( id );

CREATE TABLE customer (
    id            INTEGER NOT NULL,
    "NAME"        VARCHAR(50),
    bonus_point   double
);

ALTER TABLE customer ADD CONSTRAINT customer_pk PRIMARY KEY ( id );

CREATE TABLE hotel (
    id         INTEGER NOT NULL,
    location   VARCHAR(50),
    "NAME"     VARCHAR(50),
    point      INTEGER
);

ALTER TABLE hotel ADD CONSTRAINT hotel_pk PRIMARY KEY ( id );

CREATE TABLE hotel_capacity (
    id               INTEGER NOT NULL,
    daily_capacity   INTEGER,
    price            INTEGER,
    hotel_id         INTEGER NOT NULL
);

ALTER TABLE hotel_capacity ADD CONSTRAINT hotel_capacity_pk PRIMARY KEY ( id );

CREATE TABLE hotel_ticket (
    id          INTEGER NOT NULL,
    hotel_id    INTEGER NOT NULL,
    ticket_id   INTEGER NOT NULL,
    check_in    DATE,
    check_out   DATE
);

ALTER TABLE hotel_ticket ADD CONSTRAINT hotel_ticket_pk PRIMARY KEY ( id );

CREATE TABLE route_ticket (
    id INTEGER NOT NULL,
    route_id      INTEGER NOT NULL,
    ticket_id     INTEGER NOT NULL,
    price         double,
    "FROM"        VARCHAR(50),
    "TO"          VARCHAR(50),
    travel_date   DATE,
    company_id    INTEGER NOT NULL
);

ALTER TABLE route_ticket ADD CONSTRAINT route_ticket_pk PRIMARY KEY ( id );

CREATE TABLE ticket (
    id                      INTEGER NOT NULL,
    payment_type            VARCHAR(50),
    "DATE"                  DATE,
    payment_amount          double,
    "BONUS_POINT_EARNED "   double,
    used_points             double,
    customer_id             INTEGER NOT NULL
);

ALTER TABLE ticket ADD CONSTRAINT ticket_pk PRIMARY KEY ( id );


ALTER TABLE HOTEL_CAPACITY
    ADD CONSTRAINT hotel_capacity_hotel_fk FOREIGN KEY ( hotel_id )
        REFERENCES hotel ( id );

ALTER TABLE HOTEL_TICKET
    ADD CONSTRAINT hotel_ticket_hotel_fk FOREIGN KEY ( hotel_id )
        REFERENCES hotel ( id );

ALTER TABLE HOTEL_TICKET
    ADD CONSTRAINT hotel_ticket_ticket_fk FOREIGN KEY ( ticket_id )
        REFERENCES ticket ( id );

ALTER TABLE ROUTE_TICKET
    ADD CONSTRAINT route_ticket_company_fk FOREIGN KEY ( company_id )
        REFERENCES company ( id );

ALTER TABLE ROUTE_TICKET
    ADD CONSTRAINT route_ticket_ticket_fk FOREIGN KEY ( ticket_id )
        REFERENCES ticket ( id );

ALTER TABLE TICKET
    ADD CONSTRAINT ticket_customer_fk FOREIGN KEY ( customer_id )
        REFERENCES customer ( id );
